# Chat for first module

<font color="blue">**Команда проекта:**</font> 

* Иван Беспалов
* Роман Лигостаев


**Teamlead проекта:**

* Иван Беспалов


**Описание выбранной идеи решения:**

<font color="red" style="text-indent:25px;">При запуске программы появляется основное меню.</font> Работа с меню ведется с помощью ввода символов, соответствующих пунктам меню. 
В процессе работы с программой можно отправлять сообщения, отписываться от уведомлений, подписываться на уведомления, регистрировать нового пользователя, читать сообщения. 
Основное меню в программе реализуется с помощью класса Chat. Объект этого класса содержит вектор пользователей(содержит объекты класса User), вектор сообщений(содержит объекты класса класс Message) и список подписчиков( содержит объекты класса класс IObserver). С помощью класса Chat и класса User реализуется паттерн "Наблюдатель". Chat является Издателем, а User является Наблюдателем. Класс IPublisher является интерфейсом для Chat. Класс IObserver является интерфейсом для User.
При отправки нового сообщения создается объект класса Message и добавляется в ветор сообщений в объект класса Chat. При добавлении нового пользователя он добавляется в вектор пользователей объекта класса Chat. При подписывании на уведомление указатель на пользователя добавляется в список подписчиков. При отписсывании от уведомлений соответствено удаляется.
Вывод сообщений в основном чате производится с помощью обхода всего вектора сообщений и поиска в нем сообщений с полем кому отправлено со значение "all". Личные сообщения отображаются с помощью сравнения этого же поля с логином текущего пользователя.


**Описание пользовательских типов и функций в проекте:**

**Классы:**

* IObserver - интерфейс для Наблюдателя.

* IPublisher - интерфейс для Издателя.

* Chat - класс для реализации чата. В нем реализованы методы для меню в чате. В нем есть вектор пользователей, вектор сообщений и список подписчиков. Является наследником класса IPublisher. С помощью данного класса в программе реализуется паттерн "Наблюдатель". Этот класс является Издателем. Он информирует подписчиков о новых сообщениях.

* User - класс, описывающий пользователей. Является наследником класса IObserver. В программе с помощью этого класса реализуется паттерн "Наблюдатель". Является Наблюдателем. Получает информацию о новых сообщениях от Издателя.

* Message - класс для сообщений. Содержит константные поля с информацией о сообщении и текстом.

* Datetime - класс для определения текущей даты и времени. Вывода даты и времени в строковом виде.

* bad_data - класс для исключений. Является наследником класса std::exception


**Методы класса IObserver:**

* void updateInformationAll() - обновить информацию полученную от Издателя про общий чат
* void updateInformationSelf() - обновить информацию полученную от Издателя про личные сообщения
* bool isThisI(const string& str) - метод для сравнения какого-либо поля с переданным значением


**Методы класса IPublisher:**

* void attach(IObserver* observer) - добавить наблюдателя на подписку
* void dettach(IObserver* observer) - исключить наблюдателя из подписки
* void notifyAboutAll() - разослать информацию про общий чат
* void notifyAboutSelf(const string& login) - проинформировать про личное сообщение


**Методы класса Chat:**

* void attach(IObserver* observer) - добавить наблюдателя на подписку. Метод унаследован от IPublisher.
* void dettach(IObserver* observer) override - исключить наблюдателя из подписки. Метод унаследован от IPublisher.
* void notifyAboutAll() - разослать информацию про общий чат. Метод унаследован от IPublisher.
* void notifyAboutSelf(const string& login) - проинформировать про личное сообщение. Метод унаследован от IPublisher.
* unsigned int getAmountSelfMessage(const string &login) - получить общее количество личных сообщений для пользователя
* char showHelloMenu() - показать первое меню
* void showRegistrationMenu() - показать меню регистрации
* void showLogIn() - показать меню для входа
* void showChatMenu() - показать меню общего чата
* void showWriteMessageMenu() - показать меню для написания сообщений
* void setColorToConsole(WORD n) - установить цвет в консоле
* unique_ptr<User*> getUser(const string &login, const string &password) - получить пользователя с определенным логином и паролем
* bool checkLogin(const string& login) - проверка существует ли пользователь с таким логином
* void addMessage(const string& from, const string &to, const string& text) - добавить сообщение


**Методы класса User:**

* bool getIsSubscribes() const - получить статус подписки 
* unsigned int getAmountSelfMessages() - получить количество личных сообщений
* unsigned int getNewSelfMessages() - получить количество новых непрочитыннах личных сообщений
* unsigned int getNewAllMessages() - получить количество новых непрочитанных сообщений в общем чате

* void updateInformationAll() - обновить информацию полученную от Издателя про общий чат. Метод унаследован от IObserver.
* void updateInformationSelf() - обновить информацию полученную от Издателя про личные сообщения. Метод унаследован от IObserver.
* bool isThisI(const string& str) - метод для сравнения поля логин с переданным значением. Метод унаследован от IObserver.
* void subscribe() - подписаться на рассылку
* void unscribe() - отписаться от рассылки
* bool checkLogin(const string &login) - проверка логина
* bool checkPassword(const string& password) - проверка пароля
* void resetNewAllMessages() - сбросить количество непрочитанных сообщений в общем чате в 0
* void resetNewSelfMessages() - сбросить количество непрочитанных сообщений в личных сообщениях в 0
* void setAmountSelfMessages(unsigned int n) - Установить значение для amountSelfMessages_


**Методы класса Message:**

* const string& getSendedFrom() - узнать от кого отправлено сообщение
* const string& getText() - получить текст сообщения
* const string getDatetime() - получить дату и время
* bool checkToSendedTo(const string &login) - соответсвует ли поле кому отправлено сообщение переданной строке


**Методы класса Datetime:**

* void setNow() - установить текущие время и дату
* const string getStrAll() - получить дату и время в виде строки
* const string getStrDate() - получить дату в виде строки
* const string getStrTime() - получить время в виде строки
