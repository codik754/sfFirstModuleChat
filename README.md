# Chat for first module

**<ins>Команда проекта:</ins>**

* Иван Беспалов
* Роман Лигостаев


**<ins>Teamlead проекта:</ins>**

* Иван Беспалов


**<ins>Описание выбранной идеи решения:</ins>**

&nbsp;&nbsp;&nbsp;&nbsp;При запуске программы появляется основное меню. Работа с меню ведется с помощью ввода символов, соответствующих пунктам меню. 
В процессе работы с программой можно отправлять сообщения, отписываться от уведомлений, подписываться на уведомления, регистрировать нового пользователя, читать сообщения. 
Основное меню в программе реализуется с помощью класса Chat. Объект этого класса содержит вектор пользователей(содержит объекты класса User), вектор сообщений(содержит объекты класса класс Message) и список подписчиков( содержит объекты класса класс IObserver). С помощью класса Chat и класса User реализуется паттерн "Наблюдатель". Chat является Издателем, а User является Наблюдателем. Класс IPublisher является интерфейсом для Chat. Класс IObserver является интерфейсом для User.
При отправки нового сообщения создается объект класса Message и добавляется в ветор сообщений в объект класса Chat. При добавлении нового пользователя он добавляется в вектор пользователей объекта класса Chat. При подписывании на уведомление указатель на пользователя добавляется в список подписчиков. При отписсывании от уведомлений соответствено удаляется.
Вывод сообщений в основном чате производится с помощью обхода всего вектора сообщений и поиска в нем сообщений с полем кому отправлено со значение "all". Личные сообщения отображаются с помощью сравнения этого же поля с логином текущего пользователя.


**<ins>Описание пользовательских типов и функций в проекте:</ins>**

**Классы:**

* <b><i>IObserver</i></b> - интерфейс для Наблюдателя.

* <b><i>IPublisher</i></b> - интерфейс для Издателя.

* <b><i>Chat</i></b> - класс для реализации чата. В нем реализованы методы для меню в чате. В нем есть вектор пользователей, вектор сообщений и список подписчиков. Является наследником класса IPublisher. С помощью данного класса в программе реализуется паттерн "Наблюдатель". Этот класс является Издателем. Он информирует подписчиков о новых сообщениях.

* <b><i>User</i></b> - класс, описывающий пользователей. Является наследником класса IObserver. В программе с помощью этого класса реализуется паттерн "Наблюдатель". Является Наблюдателем. Получает информацию о новых сообщениях от Издателя.

* <b><i>Message</i></b> - класс для сообщений. Содержит константные поля с информацией о сообщении и текстом.

* <b><i>Datetime</i></b> - класс для определения текущей даты и времени. Вывода даты и времени в строковом виде.

* <b><i>bad_data</i></b> - класс для исключений. Является наследником класса std::exception


**Методы класса IObserver:**

* <b><i>void updateInformationAll()</i></b> - обновить информацию полученную от Издателя про общий чат
* <b><i>void updateInformationSelf()</i></b> - обновить информацию полученную от Издателя про личные сообщения
* <b><i>bool isThisI(const string& str)</i></b> - метод для сравнения какого-либо поля с переданным значением


**Методы класса IPublisher:**

* <b><i>void attach(IObserver* observer)</i></b> - добавить наблюдателя на подписку
* <b><i>void dettach(IObserver* observer)</i></b> - исключить наблюдателя из подписки
* <b><i>void notifyAboutAll()</i></b> - разослать информацию про общий чат
* <b><i>void notifyAboutSelf(const string& login)</i></b> - проинформировать про личное сообщение


**Методы класса Chat:**

* <b><i>void attach(IObserver* observer)</i></b> - добавить наблюдателя на подписку. Метод унаследован от IPublisher.
* <b><i>void dettach(IObserver* observer) override</i></b> - исключить наблюдателя из подписки. Метод унаследован от IPublisher.
* <b><i>void notifyAboutAll()</i></b> - разослать информацию про общий чат. Метод унаследован от IPublisher.
* <b><i>void notifyAboutSelf(const string& login)</i></b> - проинформировать про личное сообщение. Метод унаследован от IPublisher.
* <b><i>unsigned int getAmountSelfMessage(const string &login)</i></b> - получить общее количество личных сообщений для пользователя
* <b><i>char showHelloMenu()</i></b> - показать первое меню
* <b><i>void showRegistrationMenu()</i></b> - показать меню регистрации
* <b><i>void showLogIn()</i></b> - показать меню для входа
* <b><i>void showChatMenu()</i></b> - показать меню общего чата
* <b><i>void showWriteMessageMenu()</i></b> - показать меню для написания сообщений
* <b><i>void setColorToConsole(WORD n)</i></b> - установить цвет в консоле
* <b><i>unique_ptr<User*> getUser(const string &login, const string &password)</i></b> - получить пользователя с определенным логином и паролем
* <b><i>bool checkLogin(const string& login)</i></b> - проверка существует ли пользователь с таким логином
* <b><i>void addMessage(const string& from, const string &to, const string& text)</i></b> - добавить сообщение


**Методы класса User:**

* <b><i>bool getIsSubscribes() const</i></b> - получить статус подписки 
* <b><i>unsigned int getAmountSelfMessages()</i></b> - получить количество личных сообщений
* <b><i>unsigned int getNewSelfMessages()</i></b> - получить количество новых непрочитыннах личных сообщений
* <b><i>unsigned int getNewAllMessages()</i></b> - получить количество новых непрочитанных сообщений в общем чате

* <b><i>void updateInformationAll()</i></b> - обновить информацию полученную от Издателя про общий чат. Метод унаследован от IObserver.
* <b><i>void updateInformationSelf()</i></b> - обновить информацию полученную от Издателя про личные сообщения. Метод унаследован от IObserver.
* <b><i>bool isThisI(const string& str)</i></b> - метод для сравнения поля логин с переданным значением. Метод унаследован от IObserver.
* <b><i>void subscribe()</i></b> - подписаться на рассылку
* <b><i>void unscribe()</i></b> - отписаться от рассылки
* <b><i>bool checkLogin(const string &login)</i></b> - проверка логина
* <b><i>bool checkPassword(const string& password)</i></b> - проверка пароля
* <b><i>void resetNewAllMessages()</i></b> - сбросить количество непрочитанных сообщений в общем чате в 0
* <b><i>void resetNewSelfMessages()</i></b> - сбросить количество непрочитанных сообщений в личных сообщениях в 0
* <b><i>void setAmountSelfMessages(unsigned int n)</i></b> - Установить значение для amountSelfMessages_


**Методы класса Message:**

* <b><i>const string& getSendedFrom()</i></b> - узнать от кого отправлено сообщение
* <b><i>const string& getText()</i></b> - получить текст сообщения
* <b><i>сonst string getDatetime()</i></b> - получить дату и время
* <b><i>bool checkToSendedTo(const string &login)</i></b> - соответсвует ли поле кому отправлено сообщение переданной строке


**Методы класса Datetime:**

* <b><i>void setNow()</i></b> - установить текущие время и дату
* <b><i>const string getStrAll()</i></b> - получить дату и время в виде строки
* <b><i>const string getStrDate()</i></b> - получить дату в виде строки
* <b><i>const string getStrTime()</i></b> - получить время в виде строки


**<ins>Распределение задач в команде:</ins>**

* Беспалов Иван:

Определение задач по написанию и реализации проекта. Написание кода программы. Написание классов Message, Datetimme, Chat, IPublisher, IObserver, bad_data. Модернизация класса User. Написание функции main

* Лигостаев Роман:

Принятие участия в обсуждение про реализацию проекта. Написание кода. Написание начального вида класса User. Тестирование проекта. Написание README.md.